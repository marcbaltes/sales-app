if(!window.PccUserAnalytics){
	window.PccUserAnalytics = {};
}

(function(namespace){
	var systemInfo = getSystemInfo();
	var browserInfo = systemInfo.browser;

	if(systemInfo.browser == "Internet Explorer"){
		browserInfo = systemInfo.browser + " " + systemInfo.browserVersion;
	}

	var uaCreateTracker = function(uaTracker, uaUserId, page, title){
	   if(uaTracker !== undefined){
		  ga('create', uaTracker.property, 'auto', {'name': uaTracker.name, 'sampleRate': uaTracker.samplerate, 'userId': uaUserId});
		  if(page !== undefined && title !== undefined){
			 uaSetPage(uaTracker, page, title);
		  }
	   }
	}

	var uaSendPageview = function(uaTracker, page, title){
	   if(uaTracker !== undefined){
			ga(uaTracker.name + '.set', 'dimension1', uaOrgCode);
			ga(uaTracker.name + '.set', 'dimension2', uaFacId);
			ga(uaTracker.name + '.set', 'dimension3', uaUser);
			ga(uaTracker.name + '.set', 'dimension4', "PCC-" + localStorage.getItem('bID'));
			ga(uaTracker.name + '.set', 'dimension5', uaHealthCareType);
			ga(uaTracker.name + '.set', 'dimension6', browserInfo);
		  if(page !== undefined && title !== undefined){
			 ga(uaTracker.name + '.send', 'pageview', {'page': page, 'title': title});
		  } else {
			 ga(uaTracker.name + '.send', 'pageview');
		  }
	   }
	}

	var uaSendEvent = function(uaTracker, category, action, label, value){
	   if(uaTracker !== undefined){
		  ga(uaTracker.name + '.set', 'dimension1', uaOrgCode);
		  ga(uaTracker.name + '.set', 'dimension2', uaFacId);
	     ga(uaTracker.name + '.set', 'dimension3', uaUser);
	     ga(uaTracker.name + '.set', 'dimension4', "PCC-" + localStorage.getItem('bID'));
		  ga(uaTracker.name + '.set', 'dimension5', uaHealthCareType);
		  ga(uaTracker.name + '.set', 'dimension6', browserInfo);
		  ga(uaTracker.name + '.send', 'event', category, action, label, value);
	   }
	}

	var uaSetUserId = function(uaTracker, userId){
	   if(uaTracker !== undefined){
		  ga(uaTracker.name + '.set', 'userId', userId);
	   }
	}

	var uaSetPage = function(uaTracker, page, title){
	   if(uaTracker !== undefined){
		  ga(uaTracker.name + '.set', {'page': page, 'title': title});
	   }
	}

	namespace.createTracker = uaCreateTracker;
	namespace.sendPageview = uaSendPageview;
	namespace.sendEvent = uaSendEvent;
	namespace.setUserId = uaSetUserId;
	namespace.setPage = uaSetPage;
}(PccUserAnalytics));